# 📱 מדריך דיקור NFC - Shopping List PWA

## 🎯 סקירה כללית

תכונת דיקור NFC מאפשרת לך לבצע check-in ו-check-out אוטומטי באמצעה iPhone + תגי NFC.

---

## ✨ איך זה עובד?

### תהליך מלא:

1. **מקרבים את האייפון לתג NFC** 📱
2. **iOS Shortcuts מזהה את התג** 🏷️
3. **Safari נפתח אוטומטית** 🌐
4. **האפליקציה מזהה `?nfc=true`** ⚡
5. **מסך דיקור מוצג** 🎉
6. **נסגר אוטומטית אחרי 5 שניות** ⏰

---

## 🔧 הגדרה מלאה - iPhone

### שלב 1: קנה תגי NFC

**מומלץ:**
- **NTAG213** - זול (~$0.50) ועובד מעולה
- ניתן לקנות באמזון / AliExpress / eBay

**מה לחפש:**
- "NFC Tags NTAG213"
- "NFC Stickers iPhone"
- "Programmable NFC Tags"

---

### שלב 2: צור Shortcut

1. **פתח אפליקציית "קיצורי דרך"** (Shortcuts)
   - אם אין לך: הורד מה-App Store

2. **צור קיצור חדש:**
   ```
   לחץ על "+" בפינה הימנית העליונה
   ```

3. **הוסף פעולה:**
   ```
   חפש "Open URL"
   לחץ על "URL"
   הזן:
   https://shopping-1zj2f3e5o-gvc00771-9581s-projects.vercel.app?nfc=true
   ```
   
   ⚠️ **חשוב מאוד:** ה-`?nfc=true` בסוף הוא חובה!

4. **שמור את הקיצור:**
   ```
   לחץ על "הבא"
   תן שם: "דיקור NFC" או "Check-in"
   לחץ "סיום"
   ```

---

### שלב 3: חבר את התג

1. **פתח "קיצורי דרך"** → **"אוטומציות"** (Automation)

2. **צור אוטומציה חדשה:**
   ```
   לחץ "+" בפינה הימנית העליונה
   בחר "צור אוטומציה אישית"
   ```

3. **בחר NFC:**
   ```
   גלול למטה
   בחר "NFC"
   לחץ "סרוק" (Scan)
   ```

4. **סרוק את התג:**
   ```
   הקרב את האייפון לתג NFC
   תן שם לתג (למשל: "משרד - כניסה")
   לחץ "הבא"
   ```

5. **בחר פעולה:**
   ```
   לחץ "הוסף פעולה"
   בחר "הרץ קיצור דרך" (Run Shortcut)
   בחר את הקיצור שיצרת ("דיקור NFC")
   ```

6. **הסר בקשת אישור:**
   ```
   ⚠️ חשוב מאוד!
   כבה את "שאל לפני הפעלה" (Ask Before Running)
   לחץ "סיום"
   ```

---

## 🎨 מה יקרה בדיקור?

### דיקור ראשון (כניסה):
```
🎉 מסך ירוק מלא
✅ "כניסה נרשמה!"
⏰ 14:30
📅 20/11/2025
🔘 [כפתור סגור]
```

### דיקור שני (יציאה):
```
🔴 מסך אדום מלא
👋 "יציאה נרשמה!"
⏰ 18:00
📅 20/11/2025
🔘 [כפתור סגור]
```

### במובייל:
- ⏰ **סגירה אוטומטית** אחרי 5 שניות
- 📱 **מסך מלא** - אין צורך ללחוץ כלום

### במחשב:
- 🖱️ **לחץ "סגור"** לסגירה ידנית

---

## 📊 מה נשמר?

כל דיקור שומר:
- ✅ **זמן מדויק** - שעה + דקות
- 📅 **תאריך מלא**
- 🔄 **סוג פעולה** - כניסה / יציאה
- 📝 **היסטוריה מלאה** - כל הדיקורים

### איפה זה נשמר?

**localStorage** בדפדפן:
```javascript
nfc_last_checkin      // זמן דיקור אחרון
nfc_status            // "in" או "out"
nfc_attendance_records // מערך של כל הדיקורים
```

---

## 🧪 בדיקה

### אופציה 1: בדיקה ידנית

פתח בדפדפן:
```
https://shopping-1zj2f3e5o-gvc00771-9581s-projects.vercel.app?nfc=true
```

**תוצאה צפויה:**
- מסך מלא עם דיקור
- שעה נוכחית
- הודעת כניסה/יציאה

---

### אופציה 2: דף בדיקה

פתח:
```
https://shopping-1zj2f3e5o-gvc00771-9581s-projects.vercel.app/nfc-test.html
```

**מה יש שם:**
- 🔘 כפתור בדיקה
- 📊 הצגת סטטוס נוכחי
- 🗑️ כפתור למחיקת היסטוריה
- 📝 הוראות שימוש

---

## 🔍 פתרון בעיות

### הבעיה: התג לא עובד

**פתרונות:**

1. **בדוק NFC מופעל:**
   ```
   הגדרות → NFC → הפעל
   ```

2. **בדוק ה-Shortcut:**
   ```
   קיצורי דרך → המידע (i) → בדוק את ה-URL
   וודא שיש ?nfc=true בסוף
   ```

3. **בדוק האוטומציה:**
   ```
   אוטומציות → NFC → בדוק שה-"Ask Before Running" כבוי
   ```

---

### הבעיה: הדפדפן לא נפתח

**פתרונות:**

1. **סרוק מחדש את התג:**
   ```
   מחק את האוטומציה הישנה
   צור אוטומציה חדשה
   סרוק את התג שוב
   ```

2. **בדוק הרשאות:**
   ```
   הגדרות → קיצורי דרך → הרשאות
   וודא שיש הרשאה לפתוח URLs
   ```

---

### הבעיה: הדיקור לא מתבצע

**פתרונות:**

1. **בדוק את הקישור ידנית:**
   ```
   פתח Safari
   הקלד את הקישור המלא עם ?nfc=true
   ```

2. **נקה Cache:**
   ```
   Safari → הגדרות → נקה היסטוריה
   נסה שוב
   ```

3. **בדוק Console:**
   ```
   Safari → פתח Developer Tools
   Console → חפש שגיאות
   ```

---

## 🔐 אבטחה ופרטיות

### איפה הנתונים?

✅ **רק במכשיר שלך!**
- localStorage בדפדפן
- אין שרת מרכזי
- אין העלאה לענן

### מה קורה אם מנקים Cache?

⚠️ **הנתונים נמחקים!**

**פתרון:**
```javascript
// ייצוא הנתונים (Console):
console.log(localStorage.getItem('nfc_attendance_records'));

// גיבוי:
const backup = localStorage.getItem('nfc_attendance_records');
// העתק ושמור בקובץ טקסט
```

---

## 💡 טיפים מתקדמים

### טיפ 1: מספר תגים

צור מספר אוטומציות:
- **תג 1:** כניסה למשרד
- **תג 2:** כניסה לבית
- **תג 3:** כניסה לחדר כושר

כולם יכולים להשתמש באותו Shortcut!

---

### טיפ 2: דיווחים

ראה את כל הדיקורים:
```javascript
// פתח Console בדפדפן:
const records = JSON.parse(localStorage.getItem('nfc_attendance_records'));
console.table(records);
```

---

### טיפ 3: ייצוא ל-Excel

```javascript
// Console:
const records = JSON.parse(localStorage.getItem('nfc_attendance_records'));
const csv = records.map(r => `${r.date},${r.time},${r.type}`).join('\\n');
console.log('Date,Time,Type\\n' + csv);
// העתק והדבק לאקסל
```

---

## 🛒 איפה לקנות תגים?

### Amazon
```
חפש: "NFC Tags NTAG213"
מחיר: $10-15 ל-10 תגים
```

### AliExpress
```
חפש: "NFC Sticker NTAG213"
מחיר: $3-5 ל-10 תגים
זמן משלוח: 2-4 שבועות
```

### eBay
```
חפש: "Programmable NFC Tags iPhone"
מחיר: $8-12 ל-10 תגים
```

---

## 📞 תמיכה

### בעיות טכניות?

1. **בדוק את הדף הזה שוב** 📖
2. **פתח Console ובדוק שגיאות** 🔍
3. **נסה בדפדפן אחר** 🌐
4. **צור issue ב-GitHub** 💬

### רוצה תכונות נוספות?

פתח issue ב-GitHub:
```
https://github.com/hamalci/shopping-list/issues
```

---

## ✅ סיכום מהיר

1. ✅ קנה תגי NFC (NTAG213)
2. ✅ צור Shortcut עם הקישור + `?nfc=true`
3. ✅ צור אוטומציה וסרוק תג
4. ✅ כבה "Ask Before Running"
5. ✅ הקרב טלפון לתג = דיקור מיידי!

**זהו! פשוט ומהיר** 🎉

---

**נוצר עם ❤️ לניהול נוכחות חכם**
